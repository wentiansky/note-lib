<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Event 事件 | note-lib</title>
    <meta name="description" content="一个学习仓库">
    <link rel="icon" href="/note-lib/favicon.ico">
    
    <link rel="preload" href="/note-lib/assets/css/0.styles.9cfd74a3.css" as="style"><link rel="preload" href="/note-lib/assets/js/app.552cd09f.js" as="script"><link rel="preload" href="/note-lib/assets/js/2.79fbbef4.js" as="script"><link rel="preload" href="/note-lib/assets/js/26.df6fb79e.js" as="script"><link rel="prefetch" href="/note-lib/assets/js/10.ee873c39.js"><link rel="prefetch" href="/note-lib/assets/js/11.2d59e4b6.js"><link rel="prefetch" href="/note-lib/assets/js/12.b948c3b6.js"><link rel="prefetch" href="/note-lib/assets/js/13.7babcbbc.js"><link rel="prefetch" href="/note-lib/assets/js/14.102dfebf.js"><link rel="prefetch" href="/note-lib/assets/js/15.46d6a84d.js"><link rel="prefetch" href="/note-lib/assets/js/16.45a4b6c9.js"><link rel="prefetch" href="/note-lib/assets/js/17.2d250d08.js"><link rel="prefetch" href="/note-lib/assets/js/18.1f676136.js"><link rel="prefetch" href="/note-lib/assets/js/19.cf4792f1.js"><link rel="prefetch" href="/note-lib/assets/js/20.16e855a8.js"><link rel="prefetch" href="/note-lib/assets/js/21.4c1de8f1.js"><link rel="prefetch" href="/note-lib/assets/js/22.1c0f45ab.js"><link rel="prefetch" href="/note-lib/assets/js/23.322c7390.js"><link rel="prefetch" href="/note-lib/assets/js/24.899ea01e.js"><link rel="prefetch" href="/note-lib/assets/js/25.75b3664b.js"><link rel="prefetch" href="/note-lib/assets/js/27.fb9aae20.js"><link rel="prefetch" href="/note-lib/assets/js/28.3f12ab5f.js"><link rel="prefetch" href="/note-lib/assets/js/29.37eabf75.js"><link rel="prefetch" href="/note-lib/assets/js/3.12846cbb.js"><link rel="prefetch" href="/note-lib/assets/js/30.381232a0.js"><link rel="prefetch" href="/note-lib/assets/js/31.5541885c.js"><link rel="prefetch" href="/note-lib/assets/js/4.402d097d.js"><link rel="prefetch" href="/note-lib/assets/js/5.03c14cff.js"><link rel="prefetch" href="/note-lib/assets/js/6.03bd1427.js"><link rel="prefetch" href="/note-lib/assets/js/7.ee8fb7fe.js"><link rel="prefetch" href="/note-lib/assets/js/8.10e40c46.js"><link rel="prefetch" href="/note-lib/assets/js/9.b6304540.js">
    <link rel="stylesheet" href="/note-lib/assets/css/0.styles.9cfd74a3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/note-lib/zh/" class="home-link router-link-active"><!----> <span class="site-name">note-lib</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/note-lib/zh/es/" class="nav-link router-link-active">ES</a></div><div class="nav-item"><a href="/note-lib/zh/blog/" class="nav-link">博客</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">选择语言</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note-lib/" class="nav-link">English</a></li><li class="dropdown-item"><!----> <a href="/note-lib/zh/es/event.html" class="nav-link router-link-exact-active router-link-active">简体中文</a></li></ul></div></div> <a href="https://github.com/wentiansky/note-lib" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/note-lib/zh/es/" class="nav-link router-link-active">ES</a></div><div class="nav-item"><a href="/note-lib/zh/blog/" class="nav-link">博客</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">选择语言</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note-lib/" class="nav-link">English</a></li><li class="dropdown-item"><!----> <a href="/note-lib/zh/es/event.html" class="nav-link router-link-exact-active router-link-active">简体中文</a></li></ul></div></div> <a href="https://github.com/wentiansky/note-lib" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>起步</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/note-lib/zh/es/" class="sidebar-link">ECMA-Script</a></li><li><a href="/note-lib/zh/es/js-basic.html" class="sidebar-link">JS基础内容</a></li><li><a href="/note-lib/zh/es/object-oriented.html" class="sidebar-link">面向对象</a></li><li><a href="/note-lib/zh/es/BOM.html" class="sidebar-link">BOM对象</a></li><li><a href="/note-lib/zh/es/DOM1.html" class="sidebar-link">DOM1</a></li><li><a href="/note-lib/zh/es/DOM2.html" class="sidebar-link">DOM2样式</a></li><li><a href="/note-lib/zh/es/event.html" class="active sidebar-link">Event 事件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note-lib/zh/es/event.html#事件冒泡（通用事件模型，ie-支持）" class="sidebar-link">事件冒泡（通用事件模型，IE 支持）</a></li><li class="sidebar-sub-header"><a href="/note-lib/zh/es/event.html#事件捕获（很少用）" class="sidebar-link">事件捕获（很少用）</a></li><li class="sidebar-sub-header"><a href="/note-lib/zh/es/event.html#事件流" class="sidebar-link">事件流</a></li><li class="sidebar-sub-header"><a href="/note-lib/zh/es/event.html#事件处理程序（on-事件名）" class="sidebar-link">事件处理程序（on + 事件名）</a></li><li class="sidebar-sub-header"><a href="/note-lib/zh/es/event.html#编写跨浏览器事件处理代码" class="sidebar-link">编写跨浏览器事件处理代码</a></li><li class="sidebar-sub-header"><a href="/note-lib/zh/es/event.html#事件对象" class="sidebar-link">事件对象</a></li><li class="sidebar-sub-header"><a href="/note-lib/zh/es/event.html#ui-事件" class="sidebar-link">UI 事件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note-lib/zh/es/event.html#_1-load事件" class="sidebar-link">1. load事件</a></li><li class="sidebar-sub-header"><a href="/note-lib/zh/es/event.html#_2-unload事件" class="sidebar-link">2. unload事件</a></li><li class="sidebar-sub-header"><a href="/note-lib/zh/es/event.html#_3-resize事件" class="sidebar-link">3. resize事件</a></li><li class="sidebar-sub-header"><a href="/note-lib/zh/es/event.html#_4-scroll事件" class="sidebar-link">4. scroll事件</a></li><li class="sidebar-sub-header"><a href="/note-lib/zh/es/event.html#_5-焦点事件" class="sidebar-link">5. 焦点事件</a></li><li class="sidebar-sub-header"><a href="/note-lib/zh/es/event.html#_6-鼠标和滚轮事件" class="sidebar-link">6. 鼠标和滚轮事件</a></li></ul></li><li class="sidebar-sub-header"><a href="/note-lib/zh/es/event.html#html5-事件" class="sidebar-link">HTML5 事件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note-lib/zh/es/event.html#_1-contextmenu右键弹出上下文菜单" class="sidebar-link">1. contextmenu右键弹出上下文菜单</a></li><li class="sidebar-sub-header"><a href="/note-lib/zh/es/event.html#_2-beforeunload事件" class="sidebar-link">2. beforeunload事件</a></li><li class="sidebar-sub-header"><a href="/note-lib/zh/es/event.html#_3-domcontentloaded事件" class="sidebar-link">3. DOMContentLoaded事件</a></li><li class="sidebar-sub-header"><a href="/note-lib/zh/es/event.html#_4-readystatechange事件" class="sidebar-link">4. readystatechange事件</a></li><li class="sidebar-sub-header"><a href="/note-lib/zh/es/event.html#_5-pageshow和pagehide事件" class="sidebar-link">5. pageshow和pagehide事件</a></li><li class="sidebar-sub-header"><a href="/note-lib/zh/es/event.html#_6-hashchange" class="sidebar-link">6. hashchange</a></li></ul></li><li class="sidebar-sub-header"><a href="/note-lib/zh/es/event.html#设备事件" class="sidebar-link">设备事件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note-lib/zh/es/event.html#_1-orientationchange事件" class="sidebar-link">1. orientationchange事件</a></li></ul></li><li class="sidebar-sub-header"><a href="/note-lib/zh/es/event.html#触摸与手势事件" class="sidebar-link">触摸与手势事件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note-lib/zh/es/event.html#_1-触摸事件" class="sidebar-link">1. 触摸事件</a></li><li class="sidebar-sub-header"><a href="/note-lib/zh/es/event.html#_2-手势事件（ios）" class="sidebar-link">2. 手势事件（ios）</a></li></ul></li><li class="sidebar-sub-header"><a href="/note-lib/zh/es/event.html#模拟事件" class="sidebar-link">模拟事件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note-lib/zh/es/event.html#_1-模拟鼠标事件" class="sidebar-link">1. 模拟鼠标事件</a></li><li class="sidebar-sub-header"><a href="/note-lib/zh/es/event.html#_2-自定义事件" class="sidebar-link">2. 自定义事件</a></li></ul></li></ul></li><li><a href="/note-lib/zh/es/HTML5脚本编程.html" class="sidebar-link">HTML5 脚本编程</a></li><li><a href="/note-lib/zh/es/JSON.html" class="sidebar-link">JSON</a></li><li><a href="/note-lib/zh/es/Ajax.html" class="sidebar-link">Ajax</a></li><li><a href="/note-lib/zh/es/error-debug.html" class="sidebar-link">错误处理与调试</a></li><li><a href="/note-lib/zh/es/vedio-material.html" class="sidebar-link">学习视频</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="event-事件"><a href="#event-事件" aria-hidden="true" class="header-anchor">#</a> Event 事件</h1> <h2 id="事件冒泡（通用事件模型，ie-支持）"><a href="#事件冒泡（通用事件模型，ie-支持）" aria-hidden="true" class="header-anchor">#</a> 事件冒泡（通用事件模型，IE 支持）</h2> <p>事件从具体的元素逐级向上传播到文档。</p> <h2 id="事件捕获（很少用）"><a href="#事件捕获（很少用）" aria-hidden="true" class="header-anchor">#</a> 事件捕获（很少用）</h2> <p>事件从文档逐级向下传播到具体的元素。</p> <h2 id="事件流"><a href="#事件流" aria-hidden="true" class="header-anchor">#</a> 事件流</h2> <p>事件的三个阶段：事件捕获阶段、处于目标阶段和事件冒泡阶段。</p> <h2 id="事件处理程序（on-事件名）"><a href="#事件处理程序（on-事件名）" aria-hidden="true" class="header-anchor">#</a> 事件处理程序（on + 事件名）</h2> <ul><li><p><code>HTML</code>事件处理程序；</p> <ul><li>缺点 1：才加载页面时，就点击事件，会报错，解决方法：用 try-catch；</li> <li>缺点 2：HTML 代码和 JavaScript 代码紧密耦合；</li></ul></li> <li><p>DOM0 级事件处理程序；</p> <ul><li>在事件流的冒泡阶段处理；</li> <li><code>btn.onclick = null</code>可以删除事件处理程序；</li></ul></li> <li><p>DOM2 级事件处理程序；</p> <ul><li>要想删除事件处理程序，则第二参数不能是匿名函数；</li></ul></li> <li><p>IE 事件处理程序</p> <ul><li><code>attachEvent</code>和<code>detachEvent</code>；</li></ul></li></ul> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token comment">/* html事件处理程序，this指的是当前元素 */</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>try{showMessage();}catch(e){}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span>

<span class="token comment">/* DOM0级事件处理程序，this指的是当前元素 */</span>
<span class="token keyword">var</span> btn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;my-btn&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
btn<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;clicked&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">/* DOM2级事件处理程序
第三个参数若为true，在事件捕获阶段触发
第三个参数若为false，在事件冒泡阶段触发 */</span>
<span class="token keyword">var</span> btn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;my-btn&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
btn<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>
  <span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span>
  <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;clicked&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token boolean">false</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 第二参数不能是匿名函数</span>
<span class="token keyword">var</span> <span class="token function-variable function">handler</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;clicked&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 绑定事件处理程序</span>
btn<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> handler<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 移除事件处理程序</span>
btn<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> handler<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/* IE事件处理程序，this指的是windows */</span>
btn<span class="token punctuation">.</span><span class="token function">attachEvent</span><span class="token punctuation">(</span><span class="token string">&quot;onclick&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 注意第二个参数是onclick</span>
  <span class="token comment">// this === windows</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;clicked&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="编写跨浏览器事件处理代码"><a href="#编写跨浏览器事件处理代码" aria-hidden="true" class="header-anchor">#</a> 编写跨浏览器事件处理代码</h2> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> EventUtil <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">addHandler</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">element<span class="token punctuation">,</span> type<span class="token punctuation">,</span> handler</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>element<span class="token punctuation">.</span>addEventListener<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      element<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> handler<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>element<span class="token punctuation">.</span>attachEvent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      element<span class="token punctuation">.</span><span class="token function">attachEvent</span><span class="token punctuation">(</span><span class="token string">&quot;on&quot;</span> <span class="token operator">+</span> type<span class="token punctuation">,</span> handler<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      element<span class="token punctuation">[</span><span class="token string">&quot;on&quot;</span> <span class="token operator">+</span> type<span class="token punctuation">]</span> <span class="token operator">=</span> handler<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">removeHandler</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">element<span class="token punctuation">,</span> type<span class="token punctuation">,</span> handler</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>element<span class="token punctuation">.</span>removeEventListener<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      element<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> handler<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>element<span class="token punctuation">.</span>detachEvent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      element<span class="token punctuation">.</span><span class="token function">detachEvent</span><span class="token punctuation">(</span><span class="token string">&quot;on&quot;</span> <span class="token operator">+</span> type<span class="token punctuation">,</span> handler<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      element<span class="token punctuation">[</span><span class="token string">&quot;on&quot;</span> <span class="token operator">+</span> type<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="事件对象"><a href="#事件对象" aria-hidden="true" class="header-anchor">#</a> 事件对象</h2> <p><strong>DOM 中的事件对象中的属性和方法：</strong></p> <table><thead><tr><th>属性/方法</th> <th>类型</th> <th>读/写</th> <th>说明</th></tr></thead> <tbody><tr><td><code>bubbles</code></td> <td><code>Boolean</code></td> <td>只读</td> <td>事件是否冒泡</td></tr> <tr><td><code>cancelable</code></td> <td><code>Boolean</code></td> <td>只读</td> <td>是否可以取消默认行为</td></tr> <tr><td><code>currentTarget</code></td> <td><code>Element</code></td> <td>只读</td> <td>当前绑定事件的元素</td></tr> <tr><td><code>target</code></td> <td><code>Element</code></td> <td>只读</td> <td>事件的目标元素</td></tr> <tr><td><code>preventDefault</code>()</td> <td><code>Function</code></td> <td>只读</td> <td>取消事件默认行为</td></tr> <tr><td><code>stopPropagation()</code></td> <td><code>Function</code></td> <td>只读</td> <td>取消事件进一步捕获或冒泡</td></tr> <tr><td><code>stopImmediatePropagation()</code></td> <td><code>Function</code></td> <td>只读</td> <td>取消事件进一步捕获或冒泡，同时阻止任何事件处理程序被调用（<code>DOM3</code>新增）</td></tr></tbody></table> <p><strong>IE 中的事件对象属性</strong></p> <table><thead><tr><th>属性/方法</th> <th>类型</th> <th>读/写</th> <th>说明</th></tr></thead> <tbody><tr><td><code>srcElement</code></td> <td><code>Element</code></td> <td>只读</td> <td>事件的目标元素（同<code>target</code>）</td></tr> <tr><td><code>cancelBubble</code></td> <td><code>Boolean</code></td> <td>读/写</td> <td>为<code>false</code>取消事件冒泡，同<code>stopPropagation()</code></td></tr> <tr><td><code>returnValue</code></td> <td><code>Boolean</code></td> <td>读/写</td> <td>为<code>false</code>取消事件默认行为，同<code>preventDefault()</code></td></tr></tbody></table> <h2 id="ui-事件"><a href="#ui-事件" aria-hidden="true" class="header-anchor">#</a> UI 事件</h2> <h3 id="_1-load事件"><a href="#_1-load事件" aria-hidden="true" class="header-anchor">#</a> 1. <code>load</code>事件</h3> <p>当页面完全加载后（包括所有图像，js 文件，css 文件等外部资源）触发。</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code>  <span class="token comment">// 第一种绑定方式</span>
  EventUtil<span class="token punctuation">.</span><span class="token function">addHandler</span><span class="token punctuation">(</span>window<span class="token punctuation">,</span> <span class="token string">'load'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'loaded!'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">var</span> image <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#myImage'</span><span class="token punctuation">)</span>
  EventUtil<span class="token punctuation">.</span><span class="token function">addHandler</span><span class="token punctuation">(</span>image<span class="token punctuation">,</span> <span class="token string">'load'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    event <span class="token operator">=</span> EventUtil<span class="token punctuation">.</span><span class="token function">getEvent</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>EventUtil<span class="token punctuation">.</span><span class="token function">getTarget</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">.</span>src<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token comment">// 第二种方式</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span> <span class="token attr-name">onload</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>console.log('loaded!')<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>smile.gif<span class="token punctuation">&quot;</span></span> <span class="token attr-name">onload</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>console.log('image loaded!')<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span></code></pre></div><h3 id="_2-unload事件"><a href="#_2-unload事件" aria-hidden="true" class="header-anchor">#</a> 2. <code>unload</code>事件</h3> <p>从一个页面切换到另一个页面，可以清除引用，避免内存泄漏。</p> <h3 id="_3-resize事件"><a href="#_3-resize事件" aria-hidden="true" class="header-anchor">#</a> 3. <code>resize</code>事件</h3> <p>浏览器窗口被调整到一个新的高度和宽度就会触发 <code>resize</code> 事件</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>EventUtil<span class="token punctuation">.</span><span class="token function">addHandler</span><span class="token punctuation">(</span>window<span class="token punctuation">,</span> <span class="token string">&quot;resize&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;resize&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_4-scroll事件"><a href="#_4-scroll事件" aria-hidden="true" class="header-anchor">#</a> 4. <code>scroll</code>事件</h3> <p>在混杂模式下，可以通过 <code>body</code> 元素的 <code>scrollLeft</code> 和 <code>scrollTop</code> 来监控这一变化，在标准模式下除了 <code>safary</code> 浏览器的其他浏览器都以 <code>html</code> 元素来反映这一变化。</p> <ul><li><strong>常见 bug</strong> <ul><li>【现象】：<code>iphone</code> 手机上输入法弹框关闭时，页面上的元素未回到原位置</li> <li>【解决方法】：<code>document.documentElement.scrollTop = document.body.scrollTop = 0;</code></li></ul></li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code>EventUtil<span class="token punctuation">.</span><span class="token function">addHandler</span><span class="token punctuation">(</span>window<span class="token punctuation">,</span> <span class="token string">&quot;scroll&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>document<span class="token punctuation">.</span>compatMode <span class="token operator">===</span> <span class="token string">&quot;CSS1Compat&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>scrollTop<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>scrollTop<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_5-焦点事件"><a href="#_5-焦点事件" aria-hidden="true" class="header-anchor">#</a> 5. 焦点事件</h3> <p>常于 <code>document.hasFocus()</code> 和 <code>document.activeElement</code> 配合使用。</p> <ul><li><code>blur</code> 失去焦点（不冒泡）</li> <li><code>focus</code> 获得焦点（不冒泡）</li> <li><code>focusout</code> 失去焦点（冒泡）</li> <li><code>focusin</code> 获得焦点（冒泡）</li></ul> <h3 id="_6-鼠标和滚轮事件"><a href="#_6-鼠标和滚轮事件" aria-hidden="true" class="header-anchor">#</a> 6. 鼠标和滚轮事件</h3> <ul><li><code>click</code></li> <li><code>dbclick</code></li> <li><code>mousedown</code></li> <li><code>mouseup</code></li> <li><code>mouseenter</code> 从元素外部移到元素内部（不冒泡），不在后代元素上触发</li> <li><code>mouseleave</code> 从元素内部移到元素外部（不冒泡）， 不在后代元素上触发</li> <li><code>mousemove</code> 在元素内部移动重复触发</li> <li><code>mouseover</code> 从元素外部移到元素内部触发</li> <li><code>mouseout</code> 从元素内部移动元素外部或者子元素内部触发</li></ul> <div class="warning custom-block"><p class="custom-block-title">注意</p> <ol><li>阻止某个事件的默认行为很可能影响依赖它的其他事件</li> <li>事件执行顺序：<code>mousedown</code> -&gt; <code>mouseup</code> -&gt; <code>click</code> -&gt; <code>mousedown</code> -&gt; <code>mouseup</code> -&gt; <code>click</code> -&gt; <code>dbclick</code></li></ol></div> <ul><li><strong>客户区坐标位置</strong></li></ul> <p><code>clientX</code>代表鼠标指针在视口中的水平位置，<code>clientY</code>代表鼠标指针在视口中的垂直位置</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;myDiv&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
EventUtil<span class="token punctuation">.</span><span class="token function">addHandler</span><span class="token punctuation">(</span>div<span class="token punctuation">,</span> <span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  event <span class="token operator">=</span> EventUtil<span class="token punctuation">.</span><span class="token function">getEvent</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>clientX <span class="token operator">+</span> <span class="token string">&quot;,&quot;</span> <span class="token operator">+</span> event<span class="token punctuation">.</span>clientY<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><strong>页面坐标位置</strong></li></ul> <p><code>pageX</code>代表鼠标指针在页面（文档）的水平位置，<code>pageY</code>代表鼠标指针在页面（文档）的垂直位置</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;myDiv&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
EventUtil<span class="token punctuation">.</span><span class="token function">addHandler</span><span class="token punctuation">(</span>div<span class="token punctuation">,</span> <span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  event <span class="token operator">=</span> EventUtil<span class="token punctuation">.</span><span class="token function">getEvent</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>pageX <span class="token operator">+</span> <span class="token string">&quot;,&quot;</span> <span class="token operator">+</span> event<span class="token punctuation">.</span>pageY<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><em>注意：IE8 及以下版本不支持<code>pageX</code>和<code>pageY</code></em>，兼容写法如下：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;myDiv&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
EventUtil<span class="token punctuation">.</span><span class="token function">addHandler</span><span class="token punctuation">(</span>div<span class="token punctuation">,</span> <span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  event <span class="token operator">=</span> EventUtil<span class="token punctuation">.</span><span class="token function">getEvent</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> pageX <span class="token operator">=</span> event<span class="token punctuation">.</span>pageX<span class="token punctuation">,</span>
    pageY <span class="token operator">=</span> event<span class="token punctuation">.</span>pageY<span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>pageX <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    pageX <span class="token operator">=</span>
      event<span class="token punctuation">.</span>clientX <span class="token operator">+</span>
      <span class="token punctuation">(</span>document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>scrollLeft <span class="token operator">||</span> document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>scrollLeft<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>pageY <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    pageY <span class="token operator">=</span>
      event<span class="token punctuation">.</span>clientY <span class="token operator">+</span>
      <span class="token punctuation">(</span>document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>scrollTop <span class="token operator">||</span> document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>scrollTop<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>pageX <span class="token operator">+</span> <span class="token string">&quot;,&quot;</span> <span class="token operator">+</span> event<span class="token punctuation">.</span>pageY<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><strong>屏幕坐标位置</strong></li></ul> <p><code>screenX</code>代表鼠标相对整个屏幕的水平位置，<code>screenY</code>代表鼠标相对于整个屏幕的垂直位置。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;myDiv&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
EventUtil<span class="token punctuation">.</span><span class="token function">addHandler</span><span class="token punctuation">(</span>div<span class="token punctuation">,</span> <span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  event <span class="token operator">=</span> EventUtil<span class="token punctuation">.</span><span class="token function">getEvent</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>screenX <span class="token operator">+</span> <span class="token string">&quot;,&quot;</span> <span class="token operator">+</span> event<span class="token punctuation">.</span>screenY<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="html5-事件"><a href="#html5-事件" aria-hidden="true" class="header-anchor">#</a> HTML5 事件</h2> <h3 id="_1-contextmenu右键弹出上下文菜单"><a href="#_1-contextmenu右键弹出上下文菜单" aria-hidden="true" class="header-anchor">#</a> 1. <code>contextmenu</code>右键弹出上下文菜单</h3> <p>网页中菜单的简单实现：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
    <span class="token selector">#menu</span> <span class="token punctuation">{</span>
      <span class="token property">width</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>
      <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
      <span class="token property">border</span><span class="token punctuation">:</span> 1px solid #000<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>area<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>click here<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>menu<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>菜单一<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>菜单二<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>菜单三<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code>EventUtil<span class="token punctuation">.</span><span class="token function">addHandler</span><span class="token punctuation">(</span>window<span class="token punctuation">,</span> <span class="token string">&quot;load&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;#area&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  EventUtil<span class="token punctuation">.</span><span class="token function">addHandler</span><span class="token punctuation">(</span>div<span class="token punctuation">,</span> <span class="token string">&quot;contextmenu&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    event <span class="token operator">=</span> EventUtil<span class="token punctuation">.</span><span class="token function">getEvent</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">;</span>
    EventUtil<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">var</span> menu <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;#menu&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    menu<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> event<span class="token punctuation">.</span>clientX <span class="token operator">+</span> <span class="token string">&quot;px&quot;</span><span class="token punctuation">;</span>
    menu<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> event<span class="token punctuation">.</span>clientY <span class="token operator">+</span> <span class="token string">&quot;px&quot;</span><span class="token punctuation">;</span>
    menu<span class="token punctuation">.</span>style<span class="token punctuation">.</span>visibility <span class="token operator">=</span> <span class="token string">&quot;visible&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  EventUtil<span class="token punctuation">.</span><span class="token function">addHandler</span><span class="token punctuation">(</span>document<span class="token punctuation">,</span> <span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;#menu&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>visibility <span class="token operator">=</span> <span class="token string">&quot;hidden&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_2-beforeunload事件"><a href="#_2-beforeunload事件" aria-hidden="true" class="header-anchor">#</a> 2. <code>beforeunload</code>事件</h3> <p>询问用户是否真的离开页面：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>EventUtil<span class="token punctuation">.</span><span class="token function">addHandler</span><span class="token punctuation">(</span>window<span class="token punctuation">,</span> <span class="token string">&quot;beforeunload&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  event <span class="token operator">=</span> EventUtil<span class="token punctuation">.</span><span class="token function">getEvent</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> message <span class="token operator">=</span> <span class="token string">&quot;是否关闭网页？&quot;</span><span class="token punctuation">;</span>
  event<span class="token punctuation">.</span>returnValue <span class="token operator">=</span> message<span class="token punctuation">;</span>
  <span class="token keyword">return</span> message<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_3-domcontentloaded事件"><a href="#_3-domcontentloaded事件" aria-hidden="true" class="header-anchor">#</a> 3. <code>DOMContentLoaded</code>事件</h3> <p>形成完整 DOM 树后触发，比 load 事件更早</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>EventUtil<span class="token punctuation">.</span><span class="token function">addHander</span><span class="token punctuation">(</span>document<span class="token punctuation">,</span> <span class="token string">&quot;DOMContentLoaded&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;content loaded!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_4-readystatechange事件"><a href="#_4-readystatechange事件" aria-hidden="true" class="header-anchor">#</a> 4. <code>readystatechange</code>事件</h3> <p>提供与文档或元素的加载状态有关的信息，有一个<code>readyState</code>属性</p> <ul><li><code>uninitialized</code>（未初始化）：对象存在，尚未初始化；</li> <li><code>loading</code>（正在加载）：对象正在加载数据；</li> <li><code>loaded</code>（加载完毕）：对象加载数据完成；</li> <li><code>interactive</code>（交互）：可以操作对象，但没完全加载完；</li> <li><code>complete</code>（完成）：对象已经加载完毕；</li></ul> <p><em>注意：这些阶段的顺序不固定</em></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>EventUtil<span class="token punctuation">.</span><span class="token function">addHandler</span><span class="token punctuation">(</span>document<span class="token punctuation">,</span> <span class="token string">&quot;readystatechange&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>document<span class="token punctuation">.</span>readyState <span class="token operator">===</span> <span class="token string">&quot;interactive&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;content loaded!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 避免顺序不固定</span>
EventUtil<span class="token punctuation">.</span><span class="token function">addHandler</span><span class="token punctuation">(</span>document<span class="token punctuation">,</span> <span class="token string">&quot;readystatechange&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>
    document<span class="token punctuation">.</span>readyState <span class="token operator">===</span> <span class="token string">&quot;interactive&quot;</span> <span class="token operator">||</span>
    document<span class="token punctuation">.</span>readyState <span class="token operator">===</span> <span class="token string">&quot;complete&quot;</span>
  <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    EventUtil<span class="token punctuation">.</span><span class="token function">removeHandler</span><span class="token punctuation">(</span>document<span class="token punctuation">,</span> <span class="token string">&quot;readystatechange&quot;</span><span class="token punctuation">,</span> arguments<span class="token punctuation">.</span>callee<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;content loaded!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_5-pageshow和pagehide事件"><a href="#_5-pageshow和pagehide事件" aria-hidden="true" class="header-anchor">#</a> 5. <code>pageshow</code>和<code>pagehide</code>事件</h3> <p>重新加载页面时<code>pageshow</code>在<code>load</code>事件后触发
页面卸载时<code>pagehide</code>在<code>unload</code>事件前触发</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> showCount <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  EventUtil<span class="token punctuation">.</span><span class="token function">addHandler</span><span class="token punctuation">(</span>window<span class="token punctuation">,</span> <span class="token string">&quot;load&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;load fired&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  EventUtil<span class="token punctuation">.</span><span class="token function">addHandler</span><span class="token punctuation">(</span>window<span class="token punctuation">,</span> <span class="token string">&quot;pageshow&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    showCount<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token comment">// event.persisted { Boolean } 为true表示页面被保存在bfcache中</span>
    <span class="token function">alert</span><span class="token punctuation">(</span>showCount <span class="token operator">+</span> <span class="token string">&quot;times&quot;</span> <span class="token operator">+</span> event<span class="token punctuation">.</span>persisted<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_6-hashchange"><a href="#_6-hashchange" aria-hidden="true" class="header-anchor">#</a> 6. <code>hashchange</code></h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code>EventUtil<span class="token punctuation">.</span><span class="token function">addHandler</span><span class="token punctuation">(</span>window<span class="token punctuation">,</span> <span class="token string">&quot;hashchange&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;current hash: &quot;</span> <span class="token operator">+</span> location<span class="token punctuation">.</span>hash<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 检测浏览器是否支持hashchange事件</span>
<span class="token keyword">var</span> isSupported <span class="token operator">=</span>
  <span class="token string">&quot;onhashchange&quot;</span> <span class="token keyword">in</span> window <span class="token operator">&amp;&amp;</span>
  <span class="token punctuation">(</span>document<span class="token punctuation">.</span>documentMode <span class="token operator">===</span> <span class="token keyword">undefined</span> <span class="token operator">||</span> document<span class="token punctuation">.</span>documentMode <span class="token operator">&gt;</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="设备事件"><a href="#设备事件" aria-hidden="true" class="header-anchor">#</a> 设备事件</h2> <h3 id="_1-orientationchange事件"><a href="#_1-orientationchange事件" aria-hidden="true" class="header-anchor">#</a> 1. <code>orientationchange</code>事件</h3> <p>使用<code>window.orientation</code>可以获取屏幕的旋转角度</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>EventUtil<span class="token punctuation">.</span><span class="token function">addHandler</span><span class="token punctuation">(</span>window<span class="token punctuation">,</span> <span class="token string">&quot;orientationchange&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>orientation<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="触摸与手势事件"><a href="#触摸与手势事件" aria-hidden="true" class="header-anchor">#</a> 触摸与手势事件</h2> <h3 id="_1-触摸事件"><a href="#_1-触摸事件" aria-hidden="true" class="header-anchor">#</a> 1. 触摸事件</h3> <ul><li><code>touchstart</code>：手指触摸屏幕触发；</li> <li><code>touchmove</code>：手指在屏幕上滑动时连续触发，调用<code>preventDefault</code>可以阻止滚动；</li> <li><code>touchend</code>：手指从屏幕移开时触发；</li> <li><code>touchcancel</code>：系统停止跟踪触摸时触发；</li></ul> <p><code>event</code>对象提供的关于触摸的属性：</p> <ul><li><code>touches</code>：表示当前跟踪的触摸操作的<code>Touch</code>对象的数组；</li> <li><code>targetTouches</code>：特定于事件目标的<code>Touch</code>对象的数组；</li> <li><code>changedTouches</code>：表示自上次触摸以来发生了什么改变的<code>Touch</code>对象的数组；</li></ul> <p>每个<code>Touch</code>对象包含以下属性：</p> <ul><li><code>clientX</code>：触摸目标在视口中的<code>x</code>坐标；</li> <li><code>clientY</code>：触摸目标在视口中的<code>y</code>坐标；</li> <li><code>pageX</code>：触摸目标在页面中的<code>x</code>坐标；</li> <li><code>pageY</code>：触摸目标在页面中的<code>y</code>坐标；</li> <li><code>screenX</code>：触摸目标在屏幕中的<code>x</code>坐标；</li> <li><code>screenY</code>：触摸目标在屏幕中的<code>y</code>坐标；</li> <li><code>target</code>：触摸的 DOM 节点目标；</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">handleTouchEvent</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 只跟踪一次触摸</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>touches<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">case</span> <span class="token string">&quot;touchstart&quot;</span><span class="token punctuation">:</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>touches<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>clientX<span class="token punctuation">,</span> event<span class="token punctuation">.</span>touches<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>clientY<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> <span class="token string">&quot;touchend&quot;</span><span class="token punctuation">:</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>
          event<span class="token punctuation">.</span>changedTouches<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>clientX<span class="token punctuation">,</span>
          event<span class="token punctuation">.</span>changedTouches<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>clientY
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> <span class="token string">&quot;touchmove&quot;</span><span class="token punctuation">:</span>
        event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 阻止滚动</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>
          event<span class="token punctuation">.</span>changedTouches<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>clientX<span class="token punctuation">,</span>
          event<span class="token punctuation">.</span>changedTouches<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>clientY
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

EventUtil<span class="token punctuation">.</span><span class="token function">addHandler</span><span class="token punctuation">(</span>document<span class="token punctuation">,</span> <span class="token string">&quot;touchstart&quot;</span><span class="token punctuation">,</span> handleTouchEvent<span class="token punctuation">)</span><span class="token punctuation">;</span>
EventUtil<span class="token punctuation">.</span><span class="token function">addHandler</span><span class="token punctuation">(</span>document<span class="token punctuation">,</span> <span class="token string">&quot;touchend&quot;</span><span class="token punctuation">,</span> handleTouchEvent<span class="token punctuation">)</span><span class="token punctuation">;</span>
EventUtil<span class="token punctuation">.</span><span class="token function">addHandler</span><span class="token punctuation">(</span>document<span class="token punctuation">,</span> <span class="token string">&quot;touchmove&quot;</span><span class="token punctuation">,</span> handleTouchEvent<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_2-手势事件（ios）"><a href="#_2-手势事件（ios）" aria-hidden="true" class="header-anchor">#</a> 2. 手势事件（ios）</h3> <ul><li><code>gesturestart</code>：当一个手指已经按在屏幕上另一个手指又触摸手指触发；</li> <li><code>gesturechange</code>：当触摸屏幕的任何一个手指的位置发生变化时触发；</li> <li><code>gestureend</code>：当任何一个手指从屏幕上移开时触发；</li></ul> <p>手势的额外属性：</p> <ul><li><code>rotation</code>：表示手指变化引起的旋转角度；</li> <li><code>scale</code>：表示两个手指间距离的变化情况；</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">handleGestureEvent</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">&quot;gesturestart&quot;</span><span class="token punctuation">:</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>rotation<span class="token punctuation">,</span> event<span class="token punctuation">.</span>scale<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token string">&quot;gestureend&quot;</span><span class="token punctuation">:</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>rotation<span class="token punctuation">,</span> event<span class="token punctuation">.</span>scale<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token string">&quot;gesturechange&quot;</span><span class="token punctuation">:</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>rotation<span class="token punctuation">,</span> event<span class="token punctuation">.</span>scale<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">break</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

EventUtil<span class="token punctuation">.</span><span class="token function">addHandler</span><span class="token punctuation">(</span>document<span class="token punctuation">,</span> <span class="token string">&quot;gesturestart&quot;</span><span class="token punctuation">,</span> handleGestureEvent<span class="token punctuation">)</span><span class="token punctuation">;</span>
EventUtil<span class="token punctuation">.</span><span class="token function">addHandler</span><span class="token punctuation">(</span>document<span class="token punctuation">,</span> <span class="token string">&quot;gestureend&quot;</span><span class="token punctuation">,</span> handleGestureEvent<span class="token punctuation">)</span><span class="token punctuation">;</span>
EventUtil<span class="token punctuation">.</span><span class="token function">addHandler</span><span class="token punctuation">(</span>document<span class="token punctuation">,</span> <span class="token string">&quot;gesturechange&quot;</span><span class="token punctuation">,</span> handleGestureEvent<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="模拟事件"><a href="#模拟事件" aria-hidden="true" class="header-anchor">#</a> 模拟事件</h2> <h3 id="_1-模拟鼠标事件"><a href="#_1-模拟鼠标事件" aria-hidden="true" class="header-anchor">#</a> 1. 模拟鼠标事件</h3> <p>创建鼠标事件的方法为<code>createEvent('MouseEvents')</code>，返回对象有一个<code>initMouseEvent()</code>方法，用于指定与鼠标事件有关的信息有 15 个参数</p> <ul><li><code>type</code>：事件类型；</li> <li><code>bubbles</code>：是否冒泡；</li> <li><code>cancelable</code>：是否可以取消；</li> <li><code>view</code>：与事件关联的视图，总设置为<code>document.defaultView</code>；</li> <li><code>detail</code>：有事件有关的详细信息，通常设置为<code>0</code>；</li> <li><code>screenX</code>：事件相对于屏幕的<code>X</code>坐标；</li> <li><code>screenY</code>：事件相对于屏幕的<code>Y</code>坐标；</li> <li><code>clientX</code>：事件相对于视口的<code>X</code>坐标；</li> <li><code>clientY</code>：事件相对于视口的<code>Y</code>坐标；</li> <li><code>ctrlKey</code>：是否按下了<code>Ctrl</code>键，默认<code>false</code>；</li> <li><code>altKey</code>：是否按下了<code>Alt</code>键，默认<code>false</code>；</li> <li><code>shiftKey</code>：是否按下了<code>Shift</code>键，默认<code>false</code>；</li> <li><code>metaKey</code>：是否按下了<code>Meta</code>键，默认<code>false</code>；</li> <li><code>button</code>：按下了哪个鼠标键，默认<code>0</code>；</li> <li><code>relatedTarget</code>：表示事件相关的对象，在模拟<code>mouseover</code>和<code>mouseout</code>时使用；</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> btn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;myBtn&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 创建事件对象</span>
<span class="token keyword">var</span> event <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createEvent</span><span class="token punctuation">(</span><span class="token string">&quot;MouseEv·ents&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 初始化事件对象</span>
event<span class="token punctuation">.</span><span class="token function">initMouseEvent</span><span class="token punctuation">(</span>
  <span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span>
  <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token boolean">true</span><span class="token punctuation">,</span>
  document<span class="token punctuation">.</span>defaultView<span class="token punctuation">,</span>
  <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token keyword">null</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 触发事件</span>
btn<span class="token punctuation">.</span><span class="token function">dispatchEvent</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_2-自定义事件"><a href="#_2-自定义事件" aria-hidden="true" class="header-anchor">#</a> 2. 自定义事件</h3> <p>DOM3 级还定义了“自定义事件”，让开发人员创建自己的事件，调用<code>createEvent(CustomEvent)</code>，返回的对象有一个<code>initCustomEvent()</code>方法，接收 4 个参数。</p> <ul><li><code>type</code>(string)：时间类型；</li> <li><code>bubbles</code>(boolean)：是否冒泡；</li> <li><code>cancelable</code>(boolean)：是否可以取消；</li> <li><code>detail</code>(对象)：保存在<code>event</code>对象的<code>detail</code>属性中；</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;myDiv&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  event<span class="token punctuation">;</span>

EventUtil<span class="token punctuation">.</span><span class="token function">addHandler</span><span class="token punctuation">(</span>div<span class="token punctuation">,</span> <span class="token string">&quot;myevent&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;Div:&quot;</span> <span class="token operator">+</span> event<span class="token punctuation">.</span>detail<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
EventUtil<span class="token punctuation">.</span><span class="token function">addHandler</span><span class="token punctuation">(</span>document<span class="token punctuation">,</span> <span class="token string">&quot;myevent&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;Document:&quot;</span> <span class="token operator">+</span> event<span class="token punctuation">.</span>detail<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>document<span class="token punctuation">.</span>implementation<span class="token punctuation">.</span><span class="token function">hasFeature</span><span class="token punctuation">(</span><span class="token string">&quot;CustomEvents&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;3.0&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  event <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createEvent</span><span class="token punctuation">(</span><span class="token string">&quot;CustomEvent&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  event<span class="token punctuation">.</span><span class="token function">initCustomEvent</span><span class="token punctuation">(</span><span class="token string">&quot;myevent&quot;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
  div<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/wentiansky/note-lib/edit/master/docs/zh/es/event.md" target="_blank" rel="noopener noreferrer">在 GitHub 上编辑此页</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">上次更新: </span> <span class="time">2020-3-21 20:48:41</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/note-lib/zh/es/DOM2.html" class="prev">
          DOM2样式
        </a></span> <span class="next"><a href="/note-lib/zh/es/HTML5脚本编程.html">
          HTML5 脚本编程
        </a>
        →
      </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/note-lib/assets/js/app.552cd09f.js" defer></script><script src="/note-lib/assets/js/2.79fbbef4.js" defer></script><script src="/note-lib/assets/js/26.df6fb79e.js" defer></script>
  </body>
</html>
